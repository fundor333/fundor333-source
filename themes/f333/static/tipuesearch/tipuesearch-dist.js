!function(e){e.fn.tipuesearch=function(t){var s=e.extend({contentLocation:"tipuesearch/tipuesearch_content.json",contextBuffer:60,contextLength:60,contextStart:90,debug:!1,descriptiveWords:25,highlightTerms:!0,liveContent:"*",liveDescription:"*",minimumLength:3,mode:"static",newWindow:!1,show:9,showContext:!0,showRelated:!0,showTime:!0,showTitleCount:!0,showURL:!0,wholeWords:!0},t);return this.each(function(){function t(e){var t=location.search,s=(new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20");try{s=decodeURIComponent(s)}catch(e){s=unescape(s)}return s||null}function i(t,c){var h="",l=!1,o=!1,p=!0,u=0;found=[];var d=e("#tipue_search_input").val(),g=d.toLowerCase();((g=e.trim(g)).match('^"')&&g.match('"$')||g.match("^'")&&g.match("'$"))&&(p=!1);var _=g.split(" ");if(p){g="";for(m=0;m<_.length;m++){for(var v=!0,f=0;f<tipuesearch_stop_words.length;f++)_[m]==tipuesearch_stop_words[f]&&(v=!1,o=!0);v&&(g=g+" "+_[m])}_=(g=e.trim(g)).split(" ")}else g=g.substring(1,g.length-1);if(g.length>=s.minimumLength){if(p){if(c){for(var w=g,m=0;m<_.length;m++)for(f=0;f<tipuesearch_replace.words.length;f++)_[m]==tipuesearch_replace.words[f].word&&(g=g.replace(_[m],tipuesearch_replace.words[f].replace_with),l=!0);_=g.split(" ")}for(var x=g,m=0;m<_.length;m++)for(f=0;f<tipuesearch_stem.words.length;f++)_[m]==tipuesearch_stem.words[f].word&&(x=x+" "+tipuesearch_stem.words[f].stem);_=x.split(" ");for(m=0;m<a.pages.length;m++){for(var b=0,L=a.pages[m].text,f=0;f<_.length;f++){if(s.wholeWords)R=new RegExp("\\b"+_[f]+"\\b","gi");else R=new RegExp(_[f],"gi");if(-1!=a.pages[m].title.search(R)&&(b+=20*(k=a.pages[m].title.match(R).length)),-1!=a.pages[m].text.search(R)&&(b+=20*(k=a.pages[m].text.match(R).length)),-1!=a.pages[m].tags.search(R)&&(b+=10*(k=a.pages[m].tags.match(R).length)),-1!=a.pages[m].url.search(R)&&(b+=20),0!=b)for(C=0;C<tipuesearch_weight.weight.length;C++)a.pages[m].url==tipuesearch_weight.weight[C].url&&(b+=tipuesearch_weight.weight[C].score);_[f].match("^-")&&(R=new RegExp(_[f].substring(1),"i"),-1==a.pages[m].title.search(R)&&-1==a.pages[m].text.search(R)&&-1==a.pages[m].tags.search(R)||(b=0))}0!=b&&(found.push({score:b,title:a.pages[m].title,desc:L,url:a.pages[m].url}),u++)}}else for(m=0;m<a.pages.length;m++){var b=0,L=a.pages[m].text,R=new RegExp(g,"gi");if(-1!=a.pages[m].title.search(R)&&(b+=20*(k=a.pages[m].title.match(R).length)),-1!=a.pages[m].text.search(R)&&(b+=20*(k=a.pages[m].text.match(R).length)),-1!=a.pages[m].tags.search(R)){var k=a.pages[m].tags.match(R).length;b+=10*k}if(-1!=a.pages[m].url.search(R)&&(b+=20),0!=b)for(var C=0;C<tipuesearch_weight.weight.length;C++)a.pages[m].url==tipuesearch_weight.weight[C].url&&(b+=tipuesearch_weight.weight[C].score);0!=b&&(found.push({score:b,title:a.pages[m].title,desc:L,url:a.pages[m].url}),u++)}if(0!=u){if(s.showTitleCount&&0==r){var T=document.title;document.title="("+u+") "+T,r++}l&&(h+='<div id="tipue_search_warning">'+tipuesearch_string_2+" "+g+". "+tipuesearch_string_3+' <a id="tipue_search_replaced">'+w+"</a></div>"),1==u?h+='<div class="amber lighten-5 black-text container center">'+tipuesearch_string_4:(c_c=u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),h+='<div class="amber lighten-5 black-text container center">'+c_c+" "+tipuesearch_string_5),s.showTime&&(h+=" ("+(((new Date).getTime()-startTimer)/1e3).toFixed(2)+" "+tipuesearch_string_14+")",s.showTime=!1),h+="</div>",found.sort(function(e,t){return t.score-e.score});for(var E=0,m=0;m<found.length;m++){if(E>=t&&E<s.show+t){if(h+='<div class="row"><div class="page-result"><div class="card-content">',h+='<div class="card-title"><a href="'+found[m].url+'"'+n+' class="title-action" rel="bookmark">'+found[m].title+"</a></div>",s.debug&&(h+='<div class="tipue_search_content_debug">Score: '+found[m].score+"</div>"),found[m].desc){var y=found[m].desc;if(s.showContext){_=g.split(" ");var O=found[m].desc.toLowerCase().indexOf(_[0]);if(O>s.contextStart){var W=y.substr(O-s.contextBuffer),S=W.indexOf(" ");W=y.substr(O-s.contextBuffer+S),(W=e.trim(W)).length>s.contextLength&&(y="... "+W)}}if(p){_=g.split(" ");for(f=0;f<_.length;f++)if(s.highlightTerms){D=new RegExp("("+_[f]+")","gi");y=y.replace(D,"<h0011>$1<h0012>")}}else if(s.highlightTerms){var D=new RegExp("("+g+")","gi");y=y.replace(D,'<span class="tipue_search_content_bold">$1</span>')}var $="",j=y.split(" ");if(j.length<s.descriptiveWords)$=y;else for(f=0;f<s.descriptiveWords;f++)$+=j[f]+" ";"."!=($=e.trim($)).charAt($.length-1)&&($+=" ..."),h+='<div class="entry-content">'+($=($=$.replace(/h0011/g,'span class="tipue_search_content_bold"')).replace(/h0012/g,"/span"))+"</div>"}if(s.showURL){var B=found[m].url.toLowerCase();0==B.indexOf("http://")&&(B=B.slice(7)),h+='<div class="card-action page-result"><a href="'+found[m].url+'"'+n+">READ MORE</a></div>"}h+="</div></div></div>"}E++}if(s.showRelated&&p){f=0;for(m=0;m<tipuesearch_related.searches.length;m++)g==tipuesearch_related.searches[m].search&&(l&&(d=g),f||(h+='<div class="tipue_search_related_title">'+tipuesearch_string_15+"</div>"),h+='<div class="tipue_search_related_text"><a class="tipue_search_related" id="'+tipuesearch_related.searches[m].related+'">',tipuesearch_related.searches[m].before&&(h+='<span class="tipue_search_related_before">'+tipuesearch_related.searches[m].before+"</span> "),h+=tipuesearch_related.searches[m].related,tipuesearch_related.searches[m].after&&(h+=' <span class="tipue_search_related_after">'+tipuesearch_related.searches[m].after+"</span>"),h+="</a></div>",f++);f&&(h+="</div>")}if(u>s.show){var U=Math.ceil(u/s.show),q=t/s.show;if(h+='<nav class="amber lighten-5 black-text center"><div class="container"><ul id="tipue_search_foot_boxes">',t>0&&(h+='<li role="navigation"><a class="tipue_search_foot_box" accesskey="b" id="'+(t-s.show)+"_"+c+'">'+tipuesearch_string_6+"</a></li>"),q<=2){var A=U;U>3&&(A=3);for(f=0;f<A;f++)h+=f==q?'<li class="current" role="navigation">'+(f+1)+"</li>":'<li role="navigation"><a class="tipue_search_foot_box" id="'+f*s.show+"_"+c+'">'+(f+1)+"</a></li>"}else{(A=q+2)>U&&(A=U);for(f=q-1;f<A;f++)h+=f==q?'<li class="current" role="navigation">'+(f+1)+"</li>":'<li role="navigation"><a class="tipue_search_foot_box" id="'+f*s.show+"_"+c+'">'+(f+1)+"</a></li>"}q+1!=U&&(h+='<li role="navigation"><a class="tipue_search_foot_box" accesskey="m" id="'+(t+s.show)+"_"+c+'">'+tipuesearch_string_7+"</a></li>"),h+="</ul></div></nav>"}}else h+='<div id="tipue_search_warning">'+tipuesearch_string_8+"</div>"}else o?h+='<div id="tipue_search_warning">'+tipuesearch_string_8+". "+tipuesearch_string_9+"</div>":(h+='<div id="tipue_search_warning">'+tipuesearch_string_10+"</div>",1==s.minimumLength?h+='<div id="tipue_search_warning">'+tipuesearch_string_11+"</div>":h+='<div id="tipue_search_warning">'+tipuesearch_string_12+" "+s.minimumLength+" "+tipuesearch_string_13+"</div>");e("#tipue_search_content").hide().html(h).slideDown(200),e("#tipue_search_replaced").click(function(){i(0,!1)}),e(".tipue_search_related").click(function(){e("#tipue_search_input").val(e(this).attr("id")),i(0,!0)}),e(".tipue_search_foot_box").click(function(){var t=e(this).attr("id").split("_");i(parseInt(t[0]),t[1])})}var a={pages:[]};e.ajaxSetup({async:!1});var r=0;if(e("#tipue_search_content").hide().html('<div class="tipue_search_spinner"><div class="tipue_search_rect1"></div><div class="tipue_search_rect2"></div><div class="rect3"></div></div>').show(),"live"==s.mode)for(var c=0;c<tipuesearch_pages.length;c++)e.get(tipuesearch_pages[c]).done(function(t){var i=e(s.liveContent,t).text();i=i.replace(/\s+/g," ");var r=e(s.liveDescription,t).text();r=r.replace(/\s+/g," ");var n=t.toLowerCase().indexOf("<title>"),h=t.toLowerCase().indexOf("</title>",n+7);if(-1!=n&&-1!=h)l=t.slice(n+7,h);else var l=tipuesearch_string_1;a.pages.push({title:l,text:r,tags:i,url:tipuesearch_pages[c]})});"json"==s.mode&&e.getJSON(s.contentLocation).done(function(t){a=e.extend({},t)}),"static"==s.mode&&(a=e.extend({},tipuesearch));var n="";s.newWindow&&(n=' target="_blank"'),t("q")&&(e("#tipue_search_input").val(t("q")),i(0,!0)),e(this).keyup(function(e){"13"==e.keyCode&&i(0,!0)})})}}(jQuery);